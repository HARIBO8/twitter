{% load static %}
<div class="panel panel-default">
  <div class="panel-body">

    {% if tweet.original %}
      <!-- üîÅ „É™„Éù„Çπ„ÉàÊäïÁ®ø -->
      <div class="media">
        <div class="media-left">
          {% with user_profile=tweet.user.profile %}
            {% if user_profile.avatar %}
              <img src="{{ user_profile.avatar.url }}" width="48" height="48" class="media-object img-circle" alt="„Ç¢„Ç§„Ç≥„É≥">
            {% else %}
              <img src="{% static 'default_icon.png' %}" width="48" height="48" class="media-object img-circle" alt="„Éá„Éï„Ç©„É´„Éà„Ç¢„Ç§„Ç≥„É≥">
            {% endif %}
          {% endwith %}
        </div>
        <div class="media-body">
          <strong>{{ tweet.user.username }}</strong> „ÅÆ„É™„Éù„Çπ„Éà
        </div>
      </div>

      <div class="well" style="margin-top: 10px;">
        <div class="media">
          <div class="media-left">
            {% with op=tweet.original.user.profile %}
              {% if op.avatar %}
                <img src="{{ op.avatar.url }}" width="40" height="40" class="media-object img-circle" alt="„Ç¢„Ç§„Ç≥„É≥">
              {% else %}
                <img src="{% static 'default_icon.png' %}" width="40" height="40" class="media-object img-circle" alt="„Éá„Éï„Ç©„É´„Éà„Ç¢„Ç§„Ç≥„É≥">
              {% endif %}
            {% endwith %}
          </div>
          <div class="media-body">
            <strong><a href="{% url 'user_profile' tweet.original.user.id %}">{{ tweet.original.user.username }}</a></strong>
            <p>{{ tweet.original.content }}</p>
          </div>
        </div>
        <div class="clearfix">
          <div class="btn-group btn-group-xs" style="margin-top: 5px;">
            <button class="btn btn-default reply-btn" data-id="{{ tweet.original.id }}">
              <span class="glyphicon glyphicon-comment"></span> {{ tweet.original.replies.count }}‰ª∂
            </button>
            <button class="btn btn-default retweet-btn" data-id="{{ tweet.original.id }}">
              <span class="glyphicon glyphicon-retweet"></span> {{ tweet.original.retweets.count }}‰ª∂
            </button>
            <button class="btn btn-default like-btn" data-id="{{ tweet.original.id }}">
              <span class="glyphicon glyphicon-heart"></span> {{ tweet.original.likes.count }}‰ª∂
            </button>
            <a href="{% url 'tweet_detail' tweet.original.id %}" class="btn btn-default">
              <span class="glyphicon glyphicon-search"></span> Ë©≥Á¥∞
            </a>
          </div>
          <small class="pull-right" style="margin-top: 8px;">{{ tweet.original.created_at }}</small>
        </div>
      </div>

    {% else %}
      <div class="row" style="align-items: center;">
        <div class="col-xs-2" style="padding-right: 0;">
          {% with user_profile=tweet.user.profile %}
            {% if user_profile.avatar %}
              <img src="{{ user_profile.avatar.url }}" class="img-circle" style="width:48px; height:48px;" alt="„Ç¢„Ç§„Ç≥„É≥">
            {% else %}
              <img src="{% static 'default_icon.png' %}" class="img-circle" style="width:48px; height:48px;" alt="„Éá„Éï„Ç©„É´„Éà„Ç¢„Ç§„Ç≥„É≥">
            {% endif %}
          {% endwith %}
          <strong>
            <a href="{% url 'user_profile' tweet.user.id %}" style="font-size: 16px; text-decoration: none; color: inherit;">
              {{ tweet.user.username }}
            </a>
          </strong>
        </div>
      </div>      

      <!-- ‰∏≠ÔºöÊäïÁ®øÊú¨Êñá -->
      <div style="margin: 10px 0;">
        <p style="font-size: 16px;">{{ tweet.content }}</p>
      </div>

      <!-- ‰∏ãÔºöÊìç‰Ωú„Éú„Çø„É≥ + ÊäïÁ®øÊó•ÊôÇ -->
      <div class="clearfix">
        <div class="btn-group btn-group-xs" style="margin-top: 5px;">
          <button class="btn btn-default reply-btn" data-id="{{ tweet.id }}">
            <span class="glyphicon glyphicon-comment"></span> {{ tweet.replies.count }}‰ª∂
          </button>
          <button class="btn btn-default retweet-btn" data-id="{{ tweet.id }}">
            <span class="glyphicon glyphicon-retweet"></span> {{ tweet.retweets.count }}‰ª∂
          </button>
          <button class="btn btn-default like-btn" data-id="{{ tweet.id }}">
            <span class="glyphicon glyphicon-heart"></span> {{ tweet.likes.count }}‰ª∂
          </button>
          <a href="{% url 'tweet_detail' tweet.id %}" class="btn btn-default">
            <span class="glyphicon glyphicon-search"></span> Ë©≥Á¥∞
          </a>
        </div>
        <small class="pull-right" style="margin-top: 8px;">{{ tweet.created_at }}</small>
      </div>
    {% endif %}

    <!-- ‚úÖ Á∑®ÈõÜ„ÉªÂâäÈô§„Éú„Çø„É≥ -->
    {% if show_controls %}
      <div style="margin-top: 5px;">
        {% if not tweet.original %}
          <a href="{% url 'edit_tweet' tweet.id %}">‚úèÔ∏è Á∑®ÈõÜ</a> |
        {% endif %}
        <a href="{% url 'delete_tweet' tweet.id %}" onclick="return confirm('Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü');">üóëÔ∏è ÂâäÈô§</a>
      </div>
    {% endif %}

  </div>
</div>
